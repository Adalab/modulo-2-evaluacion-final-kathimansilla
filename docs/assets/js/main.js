"use strict";const ulMainElement=document.querySelector(".js__listMain");let ulFavoritesElement=document.querySelector(".js__listFavorite");const inputElement=document.querySelector(".js__inputElement"),searchBntElement=document.querySelector(".js__searchBnt"),newIconHeartCrack=document.createElement("i");newIconHeartCrack.classList.add("fa-solid"),newIconHeartCrack.classList.add("fa-heart-crack");const resetFavBtn=document.createElement("button"),resetFavBtnContent=document.createTextNode("Borrar favoritos");resetFavBtn.appendChild(resetFavBtnContent),resetFavBtn.classList.add("resetFavBtn"),resetFavBtn.classList.add("js__resetFavBtn"),console.log(resetFavBtn);const urlAPI="https://dev.adalab.es/api/disney?pageSize=15",imgEmpty="https://via.placeholder.com/210x295/ffffff/555555/?text=Disney";let isFavorite="",backGroundFav="",colorFav="",cardListApi=[],cardListFavorites=[];fetch(urlAPI).then(e=>e.json()).then(e=>{console.log(e),cardListApi=e.data,renderCardList(cardListApi)});const renderOneCard=e=>{fillEmptyImgURL(e),getFavoriteBackground(e),getFavoriteColor(e);return`<li class="card ${backGroundFav} js__cardElement" id="${e._id}">\n    <div class="card__imgContainer">\n        <img\n            src="${e.imageUrl}"\n            alt="${e.name}"\n            class="characterImg"\n        />\n    </div>\n    <div class="card__nameContainer js__nameContainer">\n      <p class="${colorFav} js__name">${e.name}</p>\n      <i class="fa-solid fa-heart ${colorFav} js__heartIcon"></i>\n    </div>\n  </li>`},fillEmptyImgURL=e=>{""!==e.imageUrl&&void 0!==e.imageUrl&&null!==e.imageUrl||(e.imageUrl="imgEmpty")},getFavoriteBackground=e=>(isFavorite=cardListFavorites.find(t=>t._id===e._id),backGroundFav=isFavorite,backGroundFav=isFavorite?"card__favorite":"",backGroundFav),getFavoriteColor=e=>(isFavorite=cardListFavorites.find(t=>t._id===e._id),colorFav=isFavorite,colorFav=isFavorite?"white":"",colorFav),renderCardList=e=>{ulMainElement.innerHTML="";for(const t of e)ulMainElement.innerHTML+=renderOneCard(t);addEventCard()},handleClickCard=e=>{const t=parseInt(e.currentTarget.id),r=cardListApi.find(e=>e._id===t),a=cardListFavorites.findIndex(e=>e._id===t);-1===a?cardListFavorites.push(r):(heartBackgroundDelete(t),cardListFavorites.splice(a,1)),localStorage.setItem("favoriteCard",JSON.stringify(cardListFavorites)),renderFavoriteList(),renderCardList(cardListApi)},renderFavoriteList=()=>{ulFavoritesElement.innerHTML="";for(const e of cardListFavorites){ulFavoritesElement.innerHTML+=renderOneCard(e);const t=e._id;heartBackgroundAdd(t)}""===ulFavoritesElement.innerHTML?resetFavBtn.classList.add("hidden"):(resetFavBtn.classList.remove("hidden"),ulFavoritesElement.appendChild(resetFavBtn))},heartBackgroundAdd=e=>{const t=document.getElementById(e),r=t.querySelector(".js__nameContainer"),a=r.querySelector(".js__heartIcon"),i=r.querySelector(".js__name");newIconHeartCrack.style.color="white",t.style.backgroundColor="#000000",i.style.color="white",r.appendChild(newIconHeartCrack),r.removeChild(a)},heartBackgroundDelete=e=>{renderCardList(cardListApi)},handleClickSearch=e=>{e.preventDefault();const t=inputElement.value,r=cardListApi.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()));renderCardList(r)},handleKeyupEmptySearch=e=>{""===inputElement.value&&renderCardList(cardListApi)},handelClickResetFav=e=>{cardListFavorites=[],renderFavoriteList(),renderCardList(cardListApi),localStorage.setItem("favoriteCard",JSON.stringify(cardListFavorites))},addEventCard=()=>{const e=document.querySelectorAll(".js__cardElement");for(const t of e)t.addEventListener("click",handleClickCard)};searchBntElement.addEventListener("click",handleClickSearch),inputElement.addEventListener("keyup",handleKeyupEmptySearch),resetFavBtn.addEventListener("click",handelClickResetFav);const cardFavoritesLS=localStorage.getItem("favoriteCard"),init=()=>{cardFavoritesLS&&(cardListFavorites=JSON.parse(cardFavoritesLS),renderFavoriteList(cardListFavorites))};cardFavoritesLS&&(cardListFavorites=JSON.parse(cardFavoritesLS),renderFavoriteList(cardListFavorites));